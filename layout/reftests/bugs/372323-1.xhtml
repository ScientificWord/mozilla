<html xmlns="http://www.w3.org/1999/xhtml" class="reftest-wait">
  <head>
    <style>
      div { color: green; }
    </style>
  </head>
  <body onload="runTest()">
    <!-- The data: URIs are this binding
<bindings xmlns="http://www.mozilla.org/xbl">
  <binding id="test">
    <content>
      <children includes="span"/>
      <html:div xmlns:html="http://www.w3.org/1999/xhtml" style="color: red">
        <children/>
      </html:div>
    </content>
  </binding>
</bindings>
    -->
    <div id="test1" style="-moz-binding: url(data:text/xml,%3Cbindings%20xmlns%3D%22http%3A%2F%2Fwww.mozilla.org%2Fxbl%22%3E%0D%0A%20%20%3Cbinding%20id%3D%22test%22%3E%0D%0A%20%20%20%20%3Ccontent%3E%0D%0A%20%20%20%20%20%20%3Cchildren%20includes%3D%22span%22%2F%3E%0D%0A%20%20%20%20%20%20%3Chtml%3Adiv%20xmlns%3Ahtml%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%20style%3D%22color%3A%20red%22%3E%0D%0A%20%20%20%20%20%20%20%20%3Cchildren%2F%3E%0D%0A%20%20%20%20%20%20%3C%2Fhtml%3Adiv%3E%0D%0A%20%20%20%20%3C%2Fcontent%3E%0D%0A%20%20%3C%2Fbinding%3E%0D%0A%3C%2Fbindings%3E%0D%0A);"/>
    <div id="test2" style="-moz-binding: url(data:text/xml,%3Cbindings%20xmlns%3D%22http%3A%2F%2Fwww.mozilla.org%2Fxbl%22%3E%0D%0A%20%20%3Cbinding%20id%3D%22test%22%3E%0D%0A%20%20%20%20%3Ccontent%3E%0D%0A%20%20%20%20%20%20%3Cchildren%20includes%3D%22span%22%2F%3E%0D%0A%20%20%20%20%20%20%3Chtml%3Adiv%20xmlns%3Ahtml%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxhtml%22%20style%3D%22color%3A%20red%22%3E%0D%0A%20%20%20%20%20%20%20%20%3Cchildren%2F%3E%0D%0A%20%20%20%20%20%20%3C%2Fhtml%3Adiv%3E%0D%0A%20%20%20%20%3C%2Fcontent%3E%0D%0A%20%20%3C%2Fbinding%3E%0D%0A%3C%2Fbindings%3E%0D%0A);">
      <!-- Make the script load, so the binding loads first -->
      <script src="data:text/javascript,document.body.offsetWidth;"/>
      <!-- The whitespace here is important... or this comment will do
           the trick too -->
      <span>test</span>
    </div>
    <script>
      function runTest() {
        var n = document.getElementById("test1");
        n.appendChild(makeSpan());

        document.documentElement.className = "";
      }

      function makeSpan() {
        var s = document.createElementNS("http://www.w3.org/1999/xhtml",
                                         "span");
        s.appendChild(document.createTextNode("test"));
        return s;
      }      
    </script>
  </body>
</html>
